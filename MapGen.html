
<!DOCTYPE html>
<html>
<head>
    <title>Canvas</title>
    <meta http-equiv="Pragma" content="no-cache" />
    <link href="styleMap.css" type="text/css" rel="stylesheet">
</head>
<body>
    <h1>Perlin Based Map Generator</h1>
    <div class='parent'>
        <div class="child inline-block-child" >
            <canvas id="c1" width="1200" height="800"></canvas>
        </div>
        <div class="child inline-block-child">
            
            <input type="range" min="1" max="100" value="50" class="slider" id="myRange">
            <input type="range" min="1" max="100" value="50" class="slider" id="myRange">
            <input type="range" min="1" max="100" value="50" class="slider" id="myRange">
        </div>
    </div>

    <script src="perlinNoise.js"></script>
    <script src="TerrainGen.js"></script>
    <script>

        const canvas = document.getElementById('c1');
        const ctx = canvas.getContext('2d');

        terrainTypes = ['Water', 'FlatLand', 'Mountain']

        const hasCoast = true
        const isIsland = false
        const waterLevel = -40
        const mountainLevel = 50
        const ruggedness = 1 //Effects how flat or rugged terrain is
        const width = 100
        const height = 80
        const blockSize = 10

        Terrain.genNewTerrain()
        Terrain.avgSmooth(7)
        console.log(Terrain.terrain)

        for(let i = 1; i < Terrain.terrain.length-1; i++){
            for(let j = 1; j < Terrain.terrain[0].length; j++){
                Terrain.terrain[i][j] *= ruggedness
                shade = 100 + (Terrain.terrain[i][j])
                var  color = 'rgb(0,'+ shade + ',0 )'
                if(Terrain.terrain[i][j] < waterLevel){
                    var  color = 'rgb(0,0,'+ (shade+50)+ ')'
                }
                if(Terrain.terrain[i][j] > mountainLevel){
                    var  color = 'rgb(' + shade+ ','+shade +',' +shade+ ')'
                }
                if(Terrain.terrain[i][j] > 70){
                    var  color = 'rgb(255,255,255)'
                }
                DrawPoint(i*blockSize,j*blockSize,blockSize,color)
            }
        }

        

        function DrawPoint(x,y,size,color){
            ctx.fillStyle = color;
            ctx.fillRect(x,y,size,size);
        }


    </script>
</body>
</html>
